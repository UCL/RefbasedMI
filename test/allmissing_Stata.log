-----------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\ado\ian\Rmimix\test\allmissing_Stata.log
  log type:  text
 opened on:  12 Mar 2021, 19:00:52

. /*
> What does mimix do when an observation is wholly missing?
> When ref = that arm: all methods are the same, except LMCF
> When ref = other arm: 
>         MAR=same as when ref=that arm
>         LMCF=MAR at first time only
>         J2R=CIR at all times
>         everything else completely different
> My understanding:
>         J2R = CR always and = MAR when ref=that arm
>         CIR and LMCF are formally undefined
> */
. foreach isref in 1 0 {
  2.         di as input "isref = `isref'"
  3.         foreach method in j2r cr cir lmcf mar {
  4.                 di as input "Method = `method'" _c
  5.                 use c:\stata\asthma, clear
  6.                 qui replace fev=. if id==5001
  7.                 qui replace treat = cond(`isref',2,3) if id==5001
  8.                 qui mimix fev treat, id(id) time(time) method(`method') ref(2) covariates(base) clear m(1) seed(101)
  9.                 l if id==5001 & _mi_m==1
 10.         }
 11. }
isref = 1
Method = j2r
      +----------------------------------------------------------------------+
      |   id   time     treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |----------------------------------------------------------------------|
 733. | 5001      2   Placebo   2.925    2.29255       1        1          . |
 916. | 5001      4   Placebo   2.925   2.819713       1      184          . |
1099. | 5001      8   Placebo   2.925   2.268666       1      367          . |
1282. | 5001     12   Placebo   2.925   2.134381       1      550          . |
      +----------------------------------------------------------------------+
Method = cr
      +----------------------------------------------------------------------+
      |   id   time     treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |----------------------------------------------------------------------|
 733. | 5001      2   Placebo   2.925    2.29255       1        1          . |
 916. | 5001      4   Placebo   2.925   2.819713       1      184          . |
1099. | 5001      8   Placebo   2.925   2.268666       1      367          . |
1282. | 5001     12   Placebo   2.925   2.134381       1      550          . |
      +----------------------------------------------------------------------+
Method = cir
      +----------------------------------------------------------------------+
      |   id   time     treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |----------------------------------------------------------------------|
 733. | 5001      2   Placebo   2.925    2.29255       1        1          . |
 916. | 5001      4   Placebo   2.925   2.819713       1      184          . |
1099. | 5001      8   Placebo   2.925   2.268666       1      367          . |
1282. | 5001     12   Placebo   2.925   2.134381       1      550          . |
      +----------------------------------------------------------------------+
Method = lmcf
      +----------------------------------------------------------------------+
      |   id   time     treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |----------------------------------------------------------------------|
 733. | 5001      2   Placebo   2.925    2.29255       1        1          . |
 916. | 5001      4   Placebo   2.925   2.898978       1      184          . |
1099. | 5001      8   Placebo   2.925    2.32183       1      367          . |
1282. | 5001     12   Placebo   2.925   2.187569       1      550          . |
      +----------------------------------------------------------------------+
Method = mar
      +----------------------------------------------------------------------+
      |   id   time     treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |----------------------------------------------------------------------|
 733. | 5001      2   Placebo   2.925    2.29255       1        1          . |
 916. | 5001      4   Placebo   2.925   2.819713       1      184          . |
1099. | 5001      8   Placebo   2.925   2.268666       1      367          . |
1282. | 5001     12   Placebo   2.925   2.134381       1      550          . |
      +----------------------------------------------------------------------+
isref = 0
Method = j2r
      +---------------------------------------------------------------------+
      |   id   time    treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |---------------------------------------------------------------------|
 733. | 5001      2   Active   2.925   2.456906       1        1          . |
 916. | 5001      4   Active   2.925    2.74648       1      184          . |
1099. | 5001      8   Active   2.925   2.975997       1      367          . |
1282. | 5001     12   Active   2.925   2.196737       1      550          . |
      +---------------------------------------------------------------------+
Method = cr
      +---------------------------------------------------------------------+
      |   id   time    treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |---------------------------------------------------------------------|
 733. | 5001      2   Active   2.925   2.481385       1        1          . |
 916. | 5001      4   Active   2.925   2.769866       1      184          . |
1099. | 5001      8   Active   2.925   2.996425       1      367          . |
1282. | 5001     12   Active   2.925   2.202672       1      550          . |
      +---------------------------------------------------------------------+
Method = cir
      +---------------------------------------------------------------------+
      |   id   time    treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |---------------------------------------------------------------------|
 733. | 5001      2   Active   2.925   2.456906       1        1          . |
 916. | 5001      4   Active   2.925    2.74648       1      184          . |
1099. | 5001      8   Active   2.925   2.975997       1      367          . |
1282. | 5001     12   Active   2.925   2.196737       1      550          . |
      +---------------------------------------------------------------------+
Method = lmcf
      +---------------------------------------------------------------------+
      |   id   time    treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |---------------------------------------------------------------------|
 733. | 5001      2   Active   2.925   2.968818       1        1          . |
 916. | 5001      4   Active   2.925   3.382065       1      184          . |
1099. | 5001      8   Active   2.925    3.53126       1      367          . |
1282. | 5001     12   Active   2.925    3.48528       1      550          . |
      +---------------------------------------------------------------------+
Method = mar
      +---------------------------------------------------------------------+
      |   id   time    treat    base        fev   _mi_m   _mi_id   _mi_miss |
      |---------------------------------------------------------------------|
 733. | 5001      2   Active   2.925   2.968818       1        1          . |
 916. | 5001      4   Active   2.925    3.40563       1      184          . |
1099. | 5001      8   Active   2.925   3.556846       1      367          . |
1282. | 5001     12   Active   2.925   3.423801       1      550          . |
      +---------------------------------------------------------------------+

. 
end of do-file
      name:  <unnamed>
       log:  C:\ado\ian\Rmimix\test\allmissing_Stata.log
  log type:  text
 closed on:  12 Mar 2021, 19:00:59
-----------------------------------------------------------------------------------------------------------------------------------------------------------------
