---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# rmimixpackage

<!-- badges: start -->
<!-- badges: end -->

# introduction 
The goal of rmimixpackage is to 
implement an R version of the mimix Stata package.This Imputes missing numerical outcomes 
for a longitudinal trial with protocol deviation under distinct treatment arm-based assumptions for the unobserved data, following the general algorithm of Carpenter, Roger, and Kenward (2013).
    
# imputation methods
The imputation methods are
    jump to reference (j2r), 
    copy increments in reference (cir)
    copy reference (cr).
 (when specifying these in the  methods argument then the reference treatment arm must be      specified in the refer argument).

     missing at random (mar),
    last mean carried forward (lmcf),
    
   As well these options a
   further option can be made specifying the causal model (see White, Joseph and Best, 2019) 
  
  Note that  
    Individual-specific imputation methods (and their reference groups) can also be specified when there exists columns
    in the input data-set. However this is mutually exclusive of using overall methods and both should not simultaneously be specified.
    See examples below

## Installation

You can install the released version of rmimixpackage from [CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("rmimixpackage")
```

## Examples

This is a basic example which shows you how to solve a common problem:

```{r example}
library(rmimixpackage)
## basic example code
 #recode treatment groups to 1,2..
asthma$treat<-ifelse(asthma$treat==2,1,ifelse(asthma$treat==3,2,99))

# method =J2R and refer =1
impdataset<-(Runmimix("asthma",c("base"),"fev","treat","id","time",10,1,"J2R",101,"jeffreys",1000,NULL,NULL) )

#anti-depressant data with methdovar & refernecevar
antidepressant<-read.table("http://raw.githubusercontent.com/UCL/mimix/master/data/SASantidepmethodvar.csv",header=TRUE,sep=",",fileEncoding = "UTF-8-BOM")

#recode treatment variable to numeric
antidepressant$TREATMENT.NAME<-ifelse(antidepressant$TREATMENT.NAME=="PLACEBO",1,ifelse(antidepressant$TREATMENT.NAME=="DRUG",2,99))
#  run individual-specific,  methodvar, 
impdataset <- Runmimix("antidepressant",c("basval"),"HAMD17.TOTAL","TREATMENT.NAME","PATIENT.NUMBER",
                       "VISIT.NUMBER",10,NULL,NULL,101,c("jeffreys"),1000,NULL,c("methodvar","referencevar"))

# run overall methd = J2R, refer =2 treatment group , ridge
impdataset <- Runmimix("antidepressant",c("basval"),"HAMD17.TOTAL","TREATMENT.NAME","PATIENT.NUMBER",
                             "VISIT.NUMBER",1000,2,"J2R",101,c("ridge"),1000,NULL,NULL)
```

What is special about using `README.Rmd` instead of just `README.md`? You can include R chunks like so:

```{r cars}
summary(cars)
```

You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date.

You can also embed plots, for example:

```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub!
